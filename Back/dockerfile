FROM openjdk:11-jdk-slim

# Definir o diretório de trabalho dentro do container
WORKDIR /app

# Copiar o pom.xml e fazer o download das dependências
COPY pom.xml .

RUN mvn dependency:go-offline

# Copiar o código fonte
COPY src /app/src

# Rodar o Maven para construir o projeto e gerar o arquivo .jar
RUN mvn clean package

# Copiar o .jar para dentro do container
COPY target/gerenciador-eventos-0.0.1-SNAPSHOT.jar /app

# Expôr a porta
EXPOSE 9000

# Definir o comando para rodar o .jar
CMD ["java", "-jar", "gerenciador-eventos-0.0.1-SNAPSHOT.jar"]
